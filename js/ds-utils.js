!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}({2:function(e,t,n){"use strict";var r,o={},i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},c=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function l(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id],c=0;if(i){for(i.refs++;c<i.parts.length;c++)i.parts[c](r.parts[c]);for(;c<r.parts.length;c++)i.parts.push(m(r.parts[c],t))}else{for(var l=[];c<r.parts.length;c++)l.push(m(r.parts[c],t));o[r.id]={id:r.id,refs:1,parts:l}}}}function s(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var o=c(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(i,c[t]):e.appendChild(i)}}function v(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&e.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,g=0;function m(e,t){var n,r,o;if(t.singleton){var i=g++;n=p||(p=s(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(t),r=v.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e,t);return a(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var c=n[i],s=o[c.id];s&&(s.refs--,r.push(s))}e&&a(l(e,t),t);for(var u=0;u<r.length;u++){var d=r[u];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete o[d.id]}}}}},22:function(e,t,n){n(23),e.exports=n(25)},23:function(e,t,n){var r=n(24);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(2)(r,o);r.locals&&(e.exports=r.locals)},24:function(e,t,n){},25:function(e,t){function n(e,t){for(var n=0;n<e.length;n++)for(var r=function(n){e[n].addEventListener("click",(function(){console.log("Click"),t[n].classList.remove("is-visible")}))},o=0;o<t.length;o++)r(o)}window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".disable-transition");e&&e.classList.toggle("disable-transition")}));var r=document.querySelectorAll(".stock-full");r&&r.forEach((function(e){var t=e.querySelector(".stock-full__wrapper");e.querySelector(".stock-full__expand").addEventListener("click",(function(){return t.classList.toggle("is-expanded")}))}));var o=document.querySelectorAll(".stock-dropdown-filter");o&&o.forEach((function(e){e.querySelector(".stock-dropdown-filter__head").addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var i=document.querySelectorAll(".item-params-list__item");i&&i.forEach((function(e){e.addEventListener("click",(function(){return e.classList.toggle("is-selected")}))}));var c=document.querySelectorAll(".item-params-list");i&&c.forEach((function(e){var t=e.nextElementSibling;t&&t.addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var l=document.querySelectorAll(".collapse-section");l&&l.forEach((function(e){e.querySelector(".collapse-section__heading").addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var a=document.querySelectorAll(".modal__select");if(a)for(var s=0;s<a.length;s++)a[s].addEventListener("click",(function(){this.classList.toggle("is-toggle")}));var u=document.querySelectorAll(".modal__select");u&&u.forEach((function(e){var t=e.querySelector(".modal__selected-position");e.querySelectorAll("li").forEach((function(e){e.addEventListener("click",(function(){t.innerHTML=e.innerHTML}))}))}));var d=document.querySelector(".modal__btn-about-goods"),f=document.querySelector(".modal__goods-info");d&&d.addEventListener("click",(function(){f.classList.toggle("is-toggle")})),document.querySelectorAll(".btn-sum").forEach((function(e){var t=e.querySelector(".btn-sum__plus"),n=e.querySelector(".btn-sum__minus"),r=e.querySelector(".btn-sum__sum-num");t&&n&&r&&(t.addEventListener("click",(function(){r.value++})),n.addEventListener("click",(function(){r.value--})))}));var v=document.querySelector(".icon-heart-bold");if(v){v.addEventListener("click",(function(){v.classList.toggle("icon-heart-filled")}))}document.querySelectorAll(".card-active-custom-desktop").forEach((function(e){var t=e.querySelector(".card-active-custom-desktop__btn-block");t&&t.addEventListener("click",(function(){e.classList.toggle("is-toggle")}))}));var p=document.querySelectorAll(".collapse-block");p&&p.forEach((function(e){e.querySelector(".arrow").addEventListener("click",(function(){e.classList.toggle("is-toggle")}))})),function(){var e=document.querySelectorAll(".collapse-block");e&&e.forEach((function(e){e.querySelector(".arrow").addEventListener("click",(function(){e.classList.toggle("is-toggle")}))}))}();var g=document.querySelectorAll(".delivery__content-wrap");g&&g.forEach((function(e){var t=e.querySelector(".delivery__header-heading-wrap").querySelector("#btn-toggle-wrap"),n=e.querySelector(".delivery__collapse-wrap");t.addEventListener("click",(function(){n.classList.toggle("is-toggle")}))})),document.querySelectorAll(".sidebar").forEach((function(e){var t=e.querySelector(".sidebar__background"),n=e.querySelector(".sidebar__close");t.addEventListener("click",(function(){e.classList.toggle("sidebar_is-active")})),n.addEventListener("click",(function(){e.classList.toggle("sidebar_is-active")}))}));var m=document.querySelectorAll(".modal__bg"),y=document.querySelectorAll(".modal__btn-close"),h=document.querySelectorAll(".modal");m&&y&&h&&(n(m,h),n(y,h))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvdXRpbHMvX2RzLXV0aWxzLnNjc3M/MWJiNCIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImxpc3RUb1N0eWxlcyIsImxpc3QiLCJvcHRpb25zIiwic3R5bGVzIiwibmV3U3R5bGVzIiwibGVuZ3RoIiwiaXRlbSIsImlkIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnRzIiwicHVzaCIsImFkZFN0eWxlc1RvRG9tIiwiZG9tU3R5bGUiLCJqIiwicmVmcyIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsIm5vbmNlIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJpbmRleCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJidG9hIiwiY29uY2F0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJfaSIsIl9kb21TdHlsZSIsImNvbnRlbnQiLCJsb2NhbHMiLCJlbGVtX2Nsb3NlIiwiY2xpY2tFbGVtIiwiZXZlbnRFbGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJjbGFzc0xpc3QiLCJkaXNhYmxlX3RyYW5zaXRpb24iLCJ0b2dnbGUiLCJzdG9ja19mdWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInN0b2NrIiwic3RvY2tfZnVsbF93cmFwcGVyIiwic3RvY2tfZHJvcGRvd25fZmlsdGVyIiwiaXRlbV9wYXJhbXNfbGlzdF9faXRlbXMiLCJpdGVtX3BhcmFtc19saXN0IiwibGluayIsIm5leHRFbGVtZW50U2libGluZyIsImNvbGxhcHNlX3NlY3Rpb24iLCJzZWN0aW9uIiwic2VsZWN0IiwiYnQiLCJ0aGlzIiwic2VsZWN0Q29udCIsInNjIiwic2VsX3Bvc2l0aW9uIiwiaW5uZXJIVE1MIiwiYnRuX3RvZ2dsZSIsInRvZ2dsZV90eHRfY29udGFpbmVyIiwicGx1cyIsIm1pbnVzIiwiaW5wdXQiLCJoZWFydCIsImJ0blRvZ2dsZSIsInRvZ2dsZUJsb2NrIiwiZGN3IiwiYnRuX3RvZyIsImN3Iiwic2lkZWJhciIsInNpZGViYXJfYmFjayIsInNpZGViYXJfY2xvc2UiLCJtb2RhbF9iZyIsImJ0bl9jbG9zZSIsIm1vZGFsIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxH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USxTQUFDeEQsR0FDQUEsRUFBRXlCLGNBQWMsVUFFdEI0RSxpQkFBaUIsU0FBUyxXQUNqQ3JHLEVBQUV3RyxVQUFVRSxPQUFPLG1CQU0vQixXQUNJLElBQUkwQixFQUFjakgsU0FBU3lGLGlCQUFpQixtQkFFeEN3QixHQUVBQSxFQUFZNUUsU0FBUSxTQUFDeEQsR0FDQUEsRUFBRXlCLGNBQWMsVUFFdEI0RSxpQkFBaUIsU0FBUyxXQUNqQ3JHLEVBQUV3RyxVQUFVRSxPQUFPLG1CQVRuQyxHQXFCQSxJQUFJMkIsRUFBTWxILFNBQVN5RixpQkFBaUIsMkJBRWhDeUIsR0FDQUEsRUFBSTdFLFNBQVEsU0FBQ3BFLEdBQ1QsSUFDSWtKLEVBRE1sSixFQUFFcUMsY0FBYyxrQ0FDUkEsY0FBYyxvQkFDNUI4RyxFQUFLbkosRUFBRXFDLGNBQWMsNEJBRXpCNkcsRUFBUWpDLGlCQUFpQixTQUFTLFdBQzlCa0MsRUFBRy9CLFVBQVVFLE9BQU8sbUJBUVZ2RixTQUFTeUYsaUJBQWlCLFlBRWxDcEQsU0FBUSxTQUFBZ0YsR0FDbEIsSUFBTUMsRUFBZUQsRUFBUS9HLGNBQWMsd0JBQ3JDaUgsRUFBZ0JGLEVBQVEvRyxjQUFjLG1CQUU1Q2dILEVBQWFwQyxpQkFBaUIsU0FBUyxXQUNuQ21DLEVBQVFoQyxVQUFVRSxPQUFPLHdCQUc3QmdDLEVBQWNyQyxpQkFBaUIsU0FBUyxXQUNwQ21DLEVBQVFoQyxVQUFVRSxPQUFPLDJCQVFqQyxJQUFJaUMsRUFBV3hILFNBQVN5RixpQkFBaUIsY0FDckNnQyxFQUFZekgsU0FBU3lGLGlCQUFpQixxQkFDdENpQyxFQUFRMUgsU0FBU3lGLGlCQUFpQixVQUVsQytCLEdBQVlDLEdBQWFDLElBRXpCM0MsRUFBV3lDLEVBQVVFLEdBQ3JCM0MsRUFBVzBDLEVBQVdDIiwiZmlsZSI6ImpzL2RzLXV0aWxzLmpzPzRmZTc4ZTcyMzE5NzMwM2YwZTE1Iiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIyKTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZXMgPSBbXTtcbiAgdmFyIG5ld1N0eWxlcyA9IHt9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY3NzID0gaXRlbVsxXTtcbiAgICB2YXIgbWVkaWEgPSBpdGVtWzJdO1xuICAgIHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuICAgIHZhciBwYXJ0ID0ge1xuICAgICAgY3NzOiBjc3MsXG4gICAgICBtZWRpYTogbWVkaWEsXG4gICAgICBzb3VyY2VNYXA6IHNvdXJjZU1hcFxuICAgIH07XG5cbiAgICBpZiAoIW5ld1N0eWxlc1tpZF0pIHtcbiAgICAgIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgcGFydHM6IFtwYXJ0XVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXTtcbiAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcbiAgICB2YXIgaiA9IDA7XG5cbiAgICBpZiAoZG9tU3R5bGUpIHtcbiAgICAgIGRvbVN0eWxlLnJlZnMrKztcblxuICAgICAgZm9yICg7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcbiAgICAgIH1cblxuICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuICAgICAgfVxuXG4gICAgICBzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIHJlZnM6IDEsXG4gICAgICAgIHBhcnRzOiBwYXJ0c1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBvcHRpb25zLmF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhvcHRpb25zLmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIG9wdGlvbnMuYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLmF0dHJpYnV0ZXMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzID09PSAnb2JqZWN0JyA/IG9wdGlvbnMuYXR0cmlidXRlcyA6IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG4gIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIHZhciBtYXlSZW1vdmUgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXTtcbiAgICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG4gICAgICBpZiAoZG9tU3R5bGUpIHtcbiAgICAgICAgZG9tU3R5bGUucmVmcy0tO1xuICAgICAgICBtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld0xpc3QpIHtcbiAgICAgIHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgICBhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtYXlSZW1vdmUubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2RvbVN0eWxlID0gbWF5UmVtb3ZlW19pXTtcblxuICAgICAgaWYgKF9kb21TdHlsZS5yZWZzID09PSAwKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX2RvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgX2RvbVN0eWxlLnBhcnRzW2pdKCk7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgc3R5bGVzSW5Eb21bX2RvbVN0eWxlLmlkXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59OyIsInZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzPz9yZWYtLTUtMSEuLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcz8/cmVmLS01LTIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/cmVmLS01LTMhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTUtNCEuL19kcy11dGlscy5zY3NzXCIpO1xuXG5pZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbn1cblxudmFyIG9wdGlvbnMgPSB7fVxuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZiAoY29udGVudC5sb2NhbHMpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbn1cbiIsIi8vINCS0YHQv9C+0LzQvtCz0LDRgtC10LvRjNC90YvQtSDRhNGD0L3QutGG0LjQuCDQv9GA0L7QtdC60YLQsCAo0LTQtdC80L7QvdGB0YLRgNCw0YbQuNGPINC40L3RgtC10YDQsNC60YLQuNCy0L3QvtGB0YLQuClcblxuLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0LvQvdC+0Lkg0LjQvdGE0Ysg0L4g0LfQsNC60YPQv9C60LVcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgY29uc3QgZGlzYWJsZV90cmFuc2l0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaXNhYmxlLXRyYW5zaXRpb25cIik7XG4gICAgaWYgKGRpc2FibGVfdHJhbnNpdGlvbikge1xuICAgICAgICBkaXNhYmxlX3RyYW5zaXRpb24uY2xhc3NMaXN0LnRvZ2dsZShcImRpc2FibGUtdHJhbnNpdGlvblwiKTtcbiAgICB9XG59KTtcblxuLy/Qn9C10YDQtdC40YHQv9C+0LvRjNC30YPQtdC80YvQtSDRhNGD0L3QutGG0LjQuFxuXG4vL9Ck0YPQvdC60YbQuNGPINC30LDQutGA0YvRgtC40Y9cbi8vIGNsaWNrRWxlbSAtINGN0LvQtdC80LXQvdGCINC/0L4g0LrQvtGC0L7RgNC+0LzRgyDQutC70LjQutCw0Y7RglxuLy8gZXZlbnRFbGVtIC0g0Y3Qu9C10LzQtdC90YIg0L3QsCDQutC+0YLQvtGA0L7QvCDQv9GA0L7QuNGB0YXQvtC00LjRgiDRgdC+0LHRi9GC0LjQtVxuZnVuY3Rpb24gZWxlbV9jbG9zZShjbGlja0VsZW0sIGV2ZW50RWxlbSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xpY2tFbGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvciAobGV0IHAgPSAwOyBwIDwgZXZlbnRFbGVtLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgICBjbGlja0VsZW1bcF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNsaWNrXCIpO1xuICAgICAgICAgICAgICAgIGV2ZW50RWxlbVtwXS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtdmlzaWJsZVwiKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGV2ZW50UGFyICAgLSDRjdC70LXQvNC10L3Rgi3RgNC+0LTQuNGC0LXQu9GMINC00LvRjyDQvtGB0YLQsNC70YzQvdGL0YUg0Y3Qu9C10LzQtdC90YLQvtCyXG4vLyBjbGlja0VsZW0gIC0g0Y3Qu9C10LzQtdC90YIg0L/QviDQutC+0YLQvtGA0L7QvNGDINC60LvQuNC60LDRjtGCXG4vLyBldmVudEVsZW0gIC0g0Y3Qu9C10LzQtdC90YIg0L3QsCDQutC+0YLQvtGA0L7QvCDQv9GA0L7QuNGB0YXQvtC00LjRgiDRgdC+0LHRi9GC0LjQtVxuLy8gZXZlbnRDbGFzcyAtINC/0YDQuNGB0LLQsNC40LLQsNC10LzRi9C5INC60LvQsNGB0YFcbi8vIGZ1bmN0aW9uIGV2ZW50X2Z1bmMoZXZlbnRQYXIsIGNsaWNrRWxlbSwgZXZlbnRFbGVtLCBldmVudENsYXNzKSB7XG4vLyAgICAgZXZlbnRQYXIuZm9yRWFjaCgoZSkgPT4ge1xuLy8gICAgICAgICBsZXQgY2xpY2tFbGVtICA9IGUucXVlcnlTZWxlY3RvcihjbGlja0VsZW0pLFxuLy8gICAgICAgICAgICAgZXZlbnRFbGVtICA9IGUucXVlcnlTZWxlY3RvcihldmVudEVsZW0pO1xuXG4vLyAgICAgICAgIGlmIChjbGlja0VsZW0gJiYgZXZlbnRFbGVtKSB7XG4vLyAgICAgICAgICAgICBjbGlja0VsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbi8vICAgICAgICAgICAgICAgICBldmVudEVsZW0uY2xhc3NMaXN0LnRvZ2dsZShldmVudENsYXNzKTtcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSk7XG4vLyB9XG5cblxuLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0LvQvdC+0Lkg0LjQvdGE0Ysg0L4g0LfQsNC60YPQv9C60LVcbmNvbnN0IHN0b2NrX2Z1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0b2NrLWZ1bGxcIik7XG5pZiAoc3RvY2tfZnVsbCkge1xuICAgIHN0b2NrX2Z1bGwuZm9yRWFjaChzdG9jayA9PiB7XG4gICAgICAgIGNvbnN0IHN0b2NrX2Z1bGxfd3JhcHBlciA9IHN0b2NrLnF1ZXJ5U2VsZWN0b3IoXCIuc3RvY2stZnVsbF9fd3JhcHBlclwiKTtcbiAgICAgICAgY29uc3QgbGlua19vcGVuID0gc3RvY2sucXVlcnlTZWxlY3RvcihcIi5zdG9jay1mdWxsX19leHBhbmRcIik7XG4gICAgICAgIGxpbmtfb3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gc3RvY2tfZnVsbF93cmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1leHBhbmRlZFwiKSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IHN0b2NrX2Ryb3Bkb3duX2ZpbHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RvY2stZHJvcGRvd24tZmlsdGVyXCIpO1xuaWYgKHN0b2NrX2Ryb3Bkb3duX2ZpbHRlcikge1xuICAgIHN0b2NrX2Ryb3Bkb3duX2ZpbHRlci5mb3JFYWNoKGZpbHRlciA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWRpbmcgPSBmaWx0ZXIucXVlcnlTZWxlY3RvcihcIi5zdG9jay1kcm9wZG93bi1maWx0ZXJfX2hlYWRcIik7XG4gICAgICAgIGhlYWRpbmcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGZpbHRlci5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtZXhwYW5kZWRcIikpO1xuICAgIH0pO1xufVxuXG5jb25zdCBpdGVtX3BhcmFtc19saXN0X19pdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbS1wYXJhbXMtbGlzdF9faXRlbVwiKTtcbmlmIChpdGVtX3BhcmFtc19saXN0X19pdGVtcykge1xuICAgIGl0ZW1fcGFyYW1zX2xpc3RfX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZShcImlzLXNlbGVjdGVkXCIpKTtcbiAgICB9KTtcbn1cblxuY29uc3QgaXRlbV9wYXJhbXNfbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbS1wYXJhbXMtbGlzdFwiKTtcbmlmIChpdGVtX3BhcmFtc19saXN0X19pdGVtcykge1xuICAgIGl0ZW1fcGFyYW1zX2xpc3QuZm9yRWFjaChsaXN0ID0+IHtcbiAgICAgICAgY29uc3QgbGluayA9IGxpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICBpZiAobGluaykge1xuICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gbGlzdC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtZXhwYW5kZWRcIikpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnN0IGNvbGxhcHNlX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbGxhcHNlLXNlY3Rpb25cIik7XG5pZiAoY29sbGFwc2Vfc2VjdGlvbikge1xuICAgIGNvbGxhcHNlX3NlY3Rpb24uZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5jb2xsYXBzZS1zZWN0aW9uX19oZWFkaW5nXCIpO1xuICAgICAgICBoZWFkaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBzZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1leHBhbmRlZFwiKSk7XG4gICAgfSk7XG59XG5cbi8v0JzQvtC00LDQu9C60LhcblxuXG4vLyA8IS0tINCc0L7QtNCw0LvQutCwINC60L7Qv9C40YDQvtCy0LDQvdC40LUg0L/QvtC30LjRhtC40LggLS0+XG5cbi8v0KDQsNGB0LrRgNGL0YLQuNC1INGB0L/QuNGB0LrQsFxubGV0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX3NlbGVjdFwiKTsgLy/QutC90L7Qv9C60LAg0YDQsNGB0LrRgNGL0LLQsNGO0YnQsNGPINCx0LvQvtC6XG4vL9Cf0LXRgNC10LHQuNGA0LDQtdC8INCy0YHQtSDQutC90L7Qv9C60LhcbmlmIChzZWxlY3QpIHtcbiAgICBmb3IgKGxldCBidCA9IDA7IGJ0IDwgc2VsZWN0Lmxlbmd0aDsgYnQrKykge1xuICAgICAgICBzZWxlY3RbYnRdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJpcy10b2dnbGVcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuLy/QktGL0LHQvtGAINC/0L7Qt9C40YbQuNC4XG5cbmxldCBzZWxlY3RDb250ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fc2VsZWN0XCIpO1xuaWYgKHNlbGVjdENvbnQpIHtcbiAgICBzZWxlY3RDb250LmZvckVhY2goc2MgPT4ge1xuICAgICAgICBsZXQgc2VsX3Bvc2l0aW9uID0gc2MucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2VsZWN0ZWQtcG9zaXRpb25cIiksXG4gICAgICAgICAgICBsaSA9IHNjLnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKTtcblxuICAgICAgICBsaS5mb3JFYWNoKGkgPT4ge1xuICAgICAgICAgICAgaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNlbF9wb3NpdGlvbi5pbm5lckhUTUwgPSBpLmlubmVySFRNTDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG4vLyA8IS0tINCa0LDRgNGC0L7Rh9C60LAg0YLQvtCy0LDRgNCwINGBINC60L7RgNC+0YLQutC40Lwg0LjQt9C+0LHRgNCw0LbQtdC90LjQtdC8IC0tPlxuXG5sZXQgYnRuX3RvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J0bi1hYm91dC1nb29kc1wiKSxcbiAgICB0b2dnbGVfdHh0X2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2dvb2RzLWluZm9cIik7XG5cbmlmIChidG5fdG9nZ2xlKSB7XG4gICAgYnRuX3RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0b2dnbGVfdHh0X2NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgIH0pO1xufVxuXG5cblxuLy8gPCEtLSDQmtC90L7Qv9C60Lgg0YPQv9GA0LDQstC70LXQvdC40Y8g0LrQvtC70LjRh9C10YHRgtCy0L7QvCDRgtC+0LLQsNGA0LAgLS0+XG5sZXQgYnRuX3N1bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYnRuLXN1bVwiKTtcblxuXG5idG5fc3VtLmZvckVhY2goKG0pID0+IHtcbiAgICBsZXQgcGx1cyA9IG0ucXVlcnlTZWxlY3RvcihcIi5idG4tc3VtX19wbHVzXCIpLFxuICAgICAgICBtaW51cyA9IG0ucXVlcnlTZWxlY3RvcihcIi5idG4tc3VtX19taW51c1wiKSxcbiAgICAgICAgaW5wdXQgPSBtLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXN1bV9fc3VtLW51bVwiKTtcblxuICAgIGlmIChwbHVzICYmIG1pbnVzICYmIGlucHV0KSB7XG4gICAgICAgIHBsdXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlKys7XG4gICAgICAgIH0pO1xuICAgICAgICBtaW51cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaW5wdXQudmFsdWUtLTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cblxuXG5cbi8vIDwhLS0g0KHQtdGA0LTQtdGH0LrQviAtLT5cblxubGV0IGhlYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pY29uLWhlYXJ0LWJvbGRcIik7XG5cbmlmIChoZWFydCkge1xuICAgIGxldCBjbGlja19oZWFydCA9ICgpID0+IHtcbiAgICAgICAgaGVhcnQuY2xhc3NMaXN0LnRvZ2dsZShcImljb24taGVhcnQtZmlsbGVkXCIpO1xuICAgIH07XG5cbiAgICBoZWFydC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tfaGVhcnQpO1xufVxuXG4vL9Ca0LDRgNGC0L7Rh9C60Lgg0LDQutGC0LjQstC90YvRhSDQt9Cw0LrRg9C/0L7QulxuXG4oKCkgPT4ge1xuICAgIGxldCBjYXJkQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJkLWFjdGl2ZS1jdXN0b20tZGVza3RvcFwiKTtcblxuICAgIGNhcmRBY3RpdmUuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICBsZXQgYnRuVG9nZ2xlID0gYy5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtYWN0aXZlLWN1c3RvbS1kZXNrdG9wX19idG4tYmxvY2tcIik7XG5cbiAgICAgICAgaWYgKGJ0blRvZ2dsZSkge1xuICAgICAgICAgICAgYnRuVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKClcblxuLy/QoNCw0LfQstC+0YDQsNGH0LjQstCw0Y7RidC40LnRgdGPINCx0LvQvtC6XG5sZXQgdG9nZ2xlQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbGxhcHNlLWJsb2NrXCIpO1xuXG5pZiAodG9nZ2xlQmxvY2spIHtcblxuICAgIHRvZ2dsZUJsb2NrLmZvckVhY2goKHQpID0+IHtcbiAgICAgICAgbGV0IGJ0bl90b2dnbGUgPSB0LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3dcIik7XG5cbiAgICAgICAgYnRuX3RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuLy/QoNCw0LfQstC+0YDQsNGH0LjQstCw0Y7RidC40LnRgdGPINCx0LvQvtC6XG4oKCkgPT4ge1xuICAgIGxldCB0b2dnbGVCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sbGFwc2UtYmxvY2tcIik7XG5cbiAgICBpZiAodG9nZ2xlQmxvY2spIHtcblxuICAgICAgICB0b2dnbGVCbG9jay5mb3JFYWNoKCh0KSA9PiB7XG4gICAgICAgICAgICBsZXQgYnRuX3RvZ2dsZSA9IHQucXVlcnlTZWxlY3RvcihcIi5hcnJvd1wiKTtcblxuICAgICAgICAgICAgYnRuX3RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHQuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIH1cblxufSkoKVxuXG5cblxuLy8g0KDQkNC30LLQvtGA0LDRh9C40LLQsNC10Lwg0LLRgdGOINC00L7RgdGC0LDQstC60YMg0LIg0LzQvtCx0LjQu9C60LVcblxubGV0IGRjdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGVsaXZlcnlfX2NvbnRlbnQtd3JhcFwiKTtcblxuaWYgKGRjdykge1xuICAgIGRjdy5mb3JFYWNoKChkKSA9PiB7XG4gICAgICAgIGxldCBkaHcgPSBkLnF1ZXJ5U2VsZWN0b3IoXCIuZGVsaXZlcnlfX2hlYWRlci1oZWFkaW5nLXdyYXBcIik7XG4gICAgICAgIGxldCBidG5fdG9nID0gZGh3LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuLXRvZ2dsZS13cmFwXCIpLFxuICAgICAgICAgICAgY3cgPSBkLnF1ZXJ5U2VsZWN0b3IoXCIuZGVsaXZlcnlfX2NvbGxhcHNlLXdyYXBcIik7XG5cbiAgICAgICAgYnRuX3RvZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY3cuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuXG5cbmNvbnN0IHNpZGViYXJfYXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpZGViYXJcIik7XG5cbnNpZGViYXJfYXJyYXkuZm9yRWFjaChzaWRlYmFyID0+IHtcbiAgICBjb25zdCBzaWRlYmFyX2JhY2sgPSBzaWRlYmFyLnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhcl9fYmFja2dyb3VuZFwiKTtcbiAgICBjb25zdCBzaWRlYmFyX2Nsb3NlID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJfX2Nsb3NlXCIpO1xuXG4gICAgc2lkZWJhcl9iYWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZShcInNpZGViYXJfaXMtYWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgc2lkZWJhcl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoXCJzaWRlYmFyX2lzLWFjdGl2ZVwiKTtcbiAgICB9KTtcblxufSk7XG5cbi8v0JfQsNC60YDRi9GC0LjQtSDQvNC+0LTQsNC70LrQuFxuLy/QrdGC0L7RgiDRgdC60YDQuNC/0YIg0LvQvtC80LDQtdGCINCy0YvQv9C+0LvQvdC10L3QuNC1INC00YDRg9Cz0LjRhS4g0J3QvtCy0YvQtSDRgdC60YDQuNC/0YLRiyDQu9GD0YfRiNC1INC00L7QsdCw0LLQu9GP0YLRjCDQv9GA0LXQtCDQvdC40LwuXG4vL9C/LtGBLiDQv9C+0YLQvtC8INC40YHQv9GA0LDQstC70Y4gXG5sZXQgbW9kYWxfYmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19iZ1wiKSxcbiAgICBidG5fY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19idG4tY2xvc2VcIiksXG4gICAgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuXG5pZiAobW9kYWxfYmcgJiYgYnRuX2Nsb3NlICYmIG1vZGFsKSB7XG5cbiAgICBlbGVtX2Nsb3NlKG1vZGFsX2JnLCBtb2RhbCk7XG4gICAgZWxlbV9jbG9zZShidG5fY2xvc2UsIG1vZGFsKTtcbn1cblxuXG5cblxuIl0sInNvdXJjZVJvb3QiOiIifQ==