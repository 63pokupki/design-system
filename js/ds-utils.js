!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}({2:function(e,t,n){"use strict";var r,o={},i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},c=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function l(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id],c=0;if(i){for(i.refs++;c<i.parts.length;c++)i.parts[c](r.parts[c]);for(;c<r.parts.length;c++)i.parts.push(g(r.parts[c],t))}else{for(var l=[];c<r.parts.length;c++)l.push(g(r.parts[c],t));o[r.id]={id:r.id,refs:1,parts:l}}}}function s(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var o=c(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(i,c[t]):e.appendChild(i)}}function v(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&e.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function g(e,t){var n,r,o;if(t.singleton){var i=m++;n=p||(p=s(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(t),r=v.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e,t);return a(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var c=n[i],s=o[c.id];s&&(s.refs--,r.push(s))}e&&a(l(e,t),t);for(var u=0;u<r.length;u++){var d=r[u];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete o[d.id]}}}}},22:function(e,t,n){n(23),e.exports=n(25)},23:function(e,t,n){var r=n(24);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(2)(r,o);r.locals&&(e.exports=r.locals)},24:function(e,t,n){},25:function(e,t){function n(e,t){for(var n=0;n<e.length;n++)for(var r=function(n){e[n].addEventListener("click",(function(){console.log("Click"),t[n].classList.remove("is-visible")}))},o=0;o<t.length;o++)r(o)}window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".disable-transition");e&&e.classList.toggle("disable-transition")}));var r=document.querySelectorAll(".stock-full");r&&r.forEach((function(e){var t=e.querySelector(".stock-full__wrapper");e.querySelector(".stock-full__expand").addEventListener("click",(function(){return t.classList.toggle("is-expanded")}))}));var o=document.querySelectorAll(".stock-dropdown-filter");o&&o.forEach((function(e){e.querySelector(".stock-dropdown-filter__head").addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var i=document.querySelectorAll(".item-params-list__item");i&&i.forEach((function(e){e.addEventListener("click",(function(){return e.classList.toggle("is-selected")}))}));var c=document.querySelectorAll(".item-params-list");i&&c.forEach((function(e){var t=e.nextElementSibling;t&&t.addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var l=document.querySelectorAll(".collapse-section");l&&l.forEach((function(e){e.querySelector(".collapse-section__heading").addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var a=document.querySelectorAll(".modal__select");if(a)for(var s=0;s<a.length;s++)a[s].addEventListener("click",(function(){this.classList.toggle("is-toggle")}));var u=document.querySelectorAll(".modal__select");u&&u.forEach((function(e){var t=e.querySelector(".modal__selected-position");e.querySelectorAll("li.item").forEach((function(e){e.addEventListener("click",(function(){t.innerHTML=e.innerHTML}))}))}));var d=document.querySelector(".modal__btn-about-goods"),f=document.querySelector(".modal__goods-info");d&&d.addEventListener("click",(function(){f.classList.toggle("is-toggle")})),document.querySelectorAll(".btn-sum").forEach((function(e){var t=e.querySelector(".btn-sum__plus"),n=e.querySelector(".btn-sum__minus"),r=e.querySelector(".btn-sum__sum-num");t&&n&&r&&(t.addEventListener("click",(function(){r.value++})),n.addEventListener("click",(function(){r.value--})))}));var v=document.querySelector(".icon-heart-bold");if(v){v.addEventListener("click",(function(){v.classList.toggle("icon-heart-filled")}))}document.querySelectorAll(".card-active-custom-desktop").forEach((function(e){var t=e.querySelector(".card-active-custom-desktop__btn-block");t&&t.addEventListener("click",(function(){e.classList.toggle("is-toggle")}))}));var p,m=document.querySelectorAll(".modal__bg"),g=document.querySelectorAll(".modal__btn-close"),b=document.querySelectorAll(".modal");m&&g&&b&&(n(m,b),n(g,b)),(p=document.querySelectorAll(".collapse-block"))&&p.forEach((function(e){e.querySelector(".arrow").addEventListener("click",(function(){e.classList.toggle("is-toggle")}))})),document.querySelectorAll(".sidebar").forEach((function(e){var t=e.querySelector(".sidebar__background"),n=e.querySelector(".sidebar__close");t.addEventListener("click",(function(){e.classList.toggle("sidebar_is-active")})),n.addEventListener("click",(function(){e.classList.toggle("sidebar_is-active")}))}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvdXRpbHMvX2RzLXV0aWxzLnNjc3M/MWJiNCIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImxpc3RUb1N0eWxlcyIsImxpc3QiLCJvcHRpb25zIiwic3R5bGVzIiwibmV3U3R5bGVzIiwibGVuZ3RoIiwiaXRlbSIsImlkIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnRzIiwicHVzaCIsImFkZFN0eWxlc1RvRG9tIiwiZG9tU3R5bGUiLCJqIiwicmVmcyIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsIm5vbmNlIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJpbmRleCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJidG9hIiwiY29uY2F0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJfaSIsIl9kb21TdHlsZSIsImNvbnRlbnQiLCJsb2NhbHMiLCJlbGVtX2Nsb3NlIiwiY2xpY2tFbGVtIiwiZXZlbnRFbGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnNvbGUiLCJsb2ciLCJjbGFzc0xpc3QiLCJkaXNhYmxlX3RyYW5zaXRpb24iLCJ0b2dnbGUiLCJzdG9ja19mdWxsIiwicXVlcnlTZWxlY3RvckFsbCIsInN0b2NrIiwic3RvY2tfZnVsbF93cmFwcGVyIiwic3RvY2tfZHJvcGRvd25fZmlsdGVyIiwiaXRlbV9wYXJhbXNfbGlzdF9faXRlbXMiLCJpdGVtX3BhcmFtc19saXN0IiwibGluayIsIm5leHRFbGVtZW50U2libGluZyIsImNvbGxhcHNlX3NlY3Rpb24iLCJzZWN0aW9uIiwic2VsZWN0IiwiYnQiLCJ0aGlzIiwic2VsZWN0Q29udCIsInNjIiwic2VsX3Bvc2l0aW9uIiwiaW5uZXJIVE1MIiwiYnRuX3RvZ2dsZSIsInRvZ2dsZV90eHRfY29udGFpbmVyIiwicGx1cyIsIm1pbnVzIiwiaW5wdXQiLCJoZWFydCIsImJ0blRvZ2dsZSIsInRvZ2dsZUJsb2NrIiwibW9kYWxfYmciLCJidG5fY2xvc2UiLCJtb2RhbCIsInNpZGViYXIiLCJzaWRlYmFyX2JhY2siLCJzaWRlYmFyX2Nsb3NlIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9I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RUFBUXBILFNBQVN5RixpQkFBaUIsVUFFbEN5QixHQUFZQyxHQUFhQyxJQUV6QnJDLEVBQVdtQyxFQUFVRSxHQUNyQnJDLEVBQVdvQyxFQUFXQyxLQVNsQkgsRUFBY2pILFNBQVN5RixpQkFBaUIscUJBSXhDd0IsRUFBWTVFLFNBQVEsU0FBQ3hELEdBQ0NBLEVBQUV5QixjQUFjLFVBRXZCNEUsaUJBQWlCLFNBQVMsV0FDakNyRyxFQUFFd0csVUFBVUUsT0FBTyxtQkFPYnZGLFNBQVN5RixpQkFBaUIsWUFFbENwRCxTQUFRLFNBQUFnRixHQUNsQixJQUFNQyxFQUFlRCxFQUFRL0csY0FBYyx3QkFDckNpSCxFQUFnQkYsRUFBUS9HLGNBQWMsbUJBRTVDZ0gsRUFBYXBDLGlCQUFpQixTQUFTLFdBQ25DbUMsRUFBUWhDLFVBQVVFLE9BQU8sd0JBRzdCZ0MsRUFBY3JDLGlCQUFpQixTQUFTLFdBQ3BDbUMsRUFBUWhDLFVBQVVFLE9BQU8iLCJmaWxlIjoianMvZHMtdXRpbHMuanM/YTZmMDFlNTdmNTg2MzZmOTBkY2YiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMjIpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlcyA9IFtdO1xuICB2YXIgbmV3U3R5bGVzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjc3MgPSBpdGVtWzFdO1xuICAgIHZhciBtZWRpYSA9IGl0ZW1bMl07XG4gICAgdmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG4gICAgdmFyIHBhcnQgPSB7XG4gICAgICBjc3M6IGNzcyxcbiAgICAgIG1lZGlhOiBtZWRpYSxcbiAgICAgIHNvdXJjZU1hcDogc291cmNlTWFwXG4gICAgfTtcblxuICAgIGlmICghbmV3U3R5bGVzW2lkXSkge1xuICAgICAgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBwYXJ0czogW3BhcnRdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuICAgIHZhciBqID0gMDtcblxuICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgZG9tU3R5bGUucmVmcysrO1xuXG4gICAgICBmb3IgKDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG5cbiAgICAgIHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgcmVmczogMSxcbiAgICAgICAgcGFydHM6IHBhcnRzXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMuYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9ucy5hdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMuYXR0cmlidXRlcyA9IHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMgPT09ICdvYmplY3QnID8gb3B0aW9ucy5hdHRyaWJ1dGVzIDoge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgdmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcbiAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgdmFyIG1heVJlbW92ZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cbiAgICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgICBkb21TdHlsZS5yZWZzLS07XG4gICAgICAgIG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3TGlzdCkge1xuICAgICAgdmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcbiAgICAgIGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1heVJlbW92ZS5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfZG9tU3R5bGUgPSBtYXlSZW1vdmVbX2ldO1xuXG4gICAgICBpZiAoX2RvbVN0eWxlLnJlZnMgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBfZG9tU3R5bGUucGFydHNbal0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzdHlsZXNJbkRvbVtfZG9tU3R5bGUuaWRdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07IiwidmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanM/P3JlZi0tNS0xIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTUtMiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTUtMyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tNS00IS4vX2RzLXV0aWxzLnNjc3NcIik7XG5cbmlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xufVxuXG52YXIgb3B0aW9ucyA9IHt9XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmIChjb250ZW50LmxvY2Fscykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xufVxuIiwiLy8g0JLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3Ri9C1INGE0YPQvdC60YbQuNC4INC/0YDQvtC10LrRgtCwICjQtNC10LzQvtC90YHRgtGA0LDRhtC40Y8g0LjQvdGC0LXRgNCw0LrRgtC40LLQvdC+0YHRgtC4KVxuXG4vLyDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qu9C90L7QuSDQuNC90YTRiyDQviDQt9Cw0LrRg9C/0LrQtVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICBjb25zdCBkaXNhYmxlX3RyYW5zaXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpc2FibGUtdHJhbnNpdGlvblwiKTtcbiAgICBpZiAoZGlzYWJsZV90cmFuc2l0aW9uKSB7XG4gICAgICAgIGRpc2FibGVfdHJhbnNpdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS10cmFuc2l0aW9uXCIpO1xuICAgIH1cbn0pO1xuXG4vL9Cf0LXRgNC10LjRgdC/0L7Qu9GM0LfRg9C10LzRi9C1INGE0YPQvdC60YbQuNC4XG5cbi8v0KTRg9C90LrRhtC40Y8g0LfQsNC60YDRi9GC0LjRj1xuLy8gY2xpY2tFbGVtIC0g0Y3Qu9C10LzQtdC90YIg0L/QviDQutC+0YLQvtGA0L7QvNGDINC60LvQuNC60LDRjtGCXG4vLyBldmVudEVsZW0gLSDRjdC70LXQvNC10L3RgiDQvdCwINC60L7RgtC+0YDQvtC8INC/0YDQvtC40YHRhdC+0LTQuNGCINGB0L7QsdGL0YLQuNC1XG5mdW5jdGlvbiBlbGVtX2Nsb3NlKGNsaWNrRWxlbSwgZXZlbnRFbGVtKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGlja0VsZW0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCBldmVudEVsZW0ubGVuZ3RoOyBwKyspIHtcbiAgICAgICAgICAgIGNsaWNrRWxlbVtwXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2xpY2tcIik7XG4gICAgICAgICAgICAgICAgZXZlbnRFbGVtW3BdLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy12aXNpYmxlXCIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gZXZlbnRQYXIgICAtINGN0LvQtdC80LXQvdGCLdGA0L7QtNC40YLQtdC70Ywg0LTQu9GPINC+0YHRgtCw0LvRjNC90YvRhSDRjdC70LXQvNC10L3RgtC+0LJcbi8vIGNsaWNrRWxlbSAgLSDRjdC70LXQvNC10L3RgiDQv9C+INC60L7RgtC+0YDQvtC80YMg0LrQu9C40LrQsNGO0YJcbi8vIGV2ZW50RWxlbSAgLSDRjdC70LXQvNC10L3RgiDQvdCwINC60L7RgtC+0YDQvtC8INC/0YDQvtC40YHRhdC+0LTQuNGCINGB0L7QsdGL0YLQuNC1XG4vLyBldmVudENsYXNzIC0g0L/RgNC40YHQstCw0LjQstCw0LXQvNGL0Lkg0LrQu9Cw0YHRgVxuZnVuY3Rpb24gZXZlbnRfZnVuYyhldmVudFBhciwgY2xpY2tFbGVtLCBldmVudEVsZW0sIGV2ZW50Q2xhc3MpIHtcbiAgICBldmVudFBhci5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgIGxldCBjbGlja0VsZW0gID0gZS5xdWVyeVNlbGVjdG9yKGNsaWNrRWxlbSksXG4gICAgICAgICAgICBldmVudEVsZW0gID0gZS5xdWVyeVNlbGVjdG9yKGV2ZW50RWxlbSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2xpY2tFbGVtICYmIGV2ZW50RWxlbSkge1xuICAgICAgICAgICAgY2xpY2tFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXZlbnRFbGVtLmNsYXNzTGlzdC50b2dnbGUoZXZlbnRDbGFzcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5cblxuLy8g0L7RgtC60YDRi9GC0LjQtSDQv9C+0LvQvdC+0Lkg0LjQvdGE0Ysg0L4g0LfQsNC60YPQv9C60LVcbmNvbnN0IHN0b2NrX2Z1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0b2NrLWZ1bGxcIik7XG5pZiAoc3RvY2tfZnVsbCkge1xuICAgIHN0b2NrX2Z1bGwuZm9yRWFjaChzdG9jayA9PiB7XG4gICAgICAgIGNvbnN0IHN0b2NrX2Z1bGxfd3JhcHBlciA9IHN0b2NrLnF1ZXJ5U2VsZWN0b3IoXCIuc3RvY2stZnVsbF9fd3JhcHBlclwiKTtcbiAgICAgICAgY29uc3QgbGlua19vcGVuID0gc3RvY2sucXVlcnlTZWxlY3RvcihcIi5zdG9jay1mdWxsX19leHBhbmRcIik7XG4gICAgICAgIGxpbmtfb3Blbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gc3RvY2tfZnVsbF93cmFwcGVyLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1leHBhbmRlZFwiKSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IHN0b2NrX2Ryb3Bkb3duX2ZpbHRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RvY2stZHJvcGRvd24tZmlsdGVyXCIpO1xuaWYgKHN0b2NrX2Ryb3Bkb3duX2ZpbHRlcikge1xuICAgIHN0b2NrX2Ryb3Bkb3duX2ZpbHRlci5mb3JFYWNoKGZpbHRlciA9PiB7XG4gICAgICAgIGNvbnN0IGhlYWRpbmcgPSBmaWx0ZXIucXVlcnlTZWxlY3RvcihcIi5zdG9jay1kcm9wZG93bi1maWx0ZXJfX2hlYWRcIik7XG4gICAgICAgIGhlYWRpbmcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGZpbHRlci5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtZXhwYW5kZWRcIikpO1xuICAgIH0pO1xufVxuXG5jb25zdCBpdGVtX3BhcmFtc19saXN0X19pdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbS1wYXJhbXMtbGlzdF9faXRlbVwiKTtcbmlmIChpdGVtX3BhcmFtc19saXN0X19pdGVtcykge1xuICAgIGl0ZW1fcGFyYW1zX2xpc3RfX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZShcImlzLXNlbGVjdGVkXCIpKTtcbiAgICB9KTtcbn1cblxuY29uc3QgaXRlbV9wYXJhbXNfbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXRlbS1wYXJhbXMtbGlzdFwiKTtcbmlmIChpdGVtX3BhcmFtc19saXN0X19pdGVtcykge1xuICAgIGl0ZW1fcGFyYW1zX2xpc3QuZm9yRWFjaChsaXN0ID0+IHtcbiAgICAgICAgY29uc3QgbGluayA9IGxpc3QubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICBpZiAobGluaykge1xuICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gbGlzdC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtZXhwYW5kZWRcIikpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmNvbnN0IGNvbGxhcHNlX3NlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvbGxhcHNlLXNlY3Rpb25cIik7XG5pZiAoY29sbGFwc2Vfc2VjdGlvbikge1xuICAgIGNvbGxhcHNlX3NlY3Rpb24uZm9yRWFjaChzZWN0aW9uID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IHNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5jb2xsYXBzZS1zZWN0aW9uX19oZWFkaW5nXCIpO1xuICAgICAgICBoZWFkaW5nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBzZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1leHBhbmRlZFwiKSk7XG4gICAgfSk7XG59XG5cbi8vIDwhLS0g0JzQvtC00LDQu9C60LAg0LrQvtC/0LjRgNC+0LLQsNC90LjQtSDQv9C+0LfQuNGG0LjQuCAtLT5cblxuLy/QoNCw0YHQutGA0YvRgtC40LUg0YHQv9C40YHQutCwXG5sZXQgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fc2VsZWN0XCIpOyAvL9C60L3QvtC/0LrQsCDRgNCw0YHQutGA0YvQstCw0Y7RidCw0Y8g0LHQu9C+0Lpcbi8v0J/QtdGA0LXQsdC40YDQsNC10Lwg0LLRgdC1INC60L3QvtC/0LrQuFxuaWYgKHNlbGVjdCkge1xuICAgIGZvciAobGV0IGJ0ID0gMDsgYnQgPCBzZWxlY3QubGVuZ3RoOyBidCsrKSB7XG4gICAgICAgIHNlbGVjdFtidF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vL9CS0YvQsdC+0YAg0L/QvtC30LjRhtC40LhcblxubGV0IHNlbGVjdENvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19zZWxlY3RcIik7XG5pZiAoc2VsZWN0Q29udCkge1xuICAgIHNlbGVjdENvbnQuZm9yRWFjaChzYyA9PiB7XG4gICAgICAgIGxldCBzZWxfcG9zaXRpb24gPSBzYy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zZWxlY3RlZC1wb3NpdGlvblwiKSxcbiAgICAgICAgICAgIGxpID0gc2MucXVlcnlTZWxlY3RvckFsbChcImxpLml0ZW1cIik7XG5cbiAgICAgICAgbGkuZm9yRWFjaChpID0+IHtcbiAgICAgICAgICAgIGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZWxfcG9zaXRpb24uaW5uZXJIVE1MID0gaS5pbm5lckhUTUw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblxuLy8gPCEtLSDQmtCw0YDRgtC+0YfQutCwINGC0L7QstCw0YDQsCDRgSDQutC+0YDQvtGC0LrQuNC8INC40LfQvtCx0YDQsNC20LXQvdC40LXQvCAtLT5cblxubGV0IGJ0bl90b2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idG4tYWJvdXQtZ29vZHNcIiksXG4gICAgdG9nZ2xlX3R4dF9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19nb29kcy1pbmZvXCIpO1xuXG5pZiAoYnRuX3RvZ2dsZSkge1xuICAgIGJ0bl90b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdG9nZ2xlX3R4dF9jb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICB9KTtcbn1cblxuXG5cbi8vIDwhLS0g0JrQvdC+0L/QutC4INGD0L/RgNCw0LLQu9C10L3QuNGPINC60L7Qu9C40YfQtdGB0YLQstC+0Lwg0YLQvtCy0LDRgNCwIC0tPlxuKCgpID0+IHtcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJ0bi1zdW1cIik7XG5cblxuICAgIG1vZGFsLmZvckVhY2goKG0pID0+IHtcbiAgICAgICAgbGV0IHBsdXMgPSBtLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXN1bV9fcGx1c1wiKSxcbiAgICAgICAgICAgIG1pbnVzID0gbS5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1zdW1fX21pbnVzXCIpLFxuICAgICAgICAgICAgaW5wdXQgPSBtLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXN1bV9fc3VtLW51bVwiKTtcblxuICAgICAgICBpZiAocGx1cyAmJiBtaW51cyAmJiBpbnB1dCkge1xuICAgICAgICAgICAgcGx1cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlucHV0LnZhbHVlKys7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1pbnVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaW5wdXQudmFsdWUtLTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59KSgpXG5cblxuXG5cbi8vIDwhLS0g0KHQtdGA0LTQtdGH0LrQviAtLT5cblxubGV0IGhlYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pY29uLWhlYXJ0LWJvbGRcIik7XG5cbmlmIChoZWFydCkge1xuICAgIGxldCBjbGlja19oZWFydCA9ICgpID0+IHtcbiAgICAgICAgaGVhcnQuY2xhc3NMaXN0LnRvZ2dsZShcImljb24taGVhcnQtZmlsbGVkXCIpO1xuICAgIH07XG5cbiAgICBoZWFydC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tfaGVhcnQpO1xufVxuXG4vL9Ca0LDRgNGC0L7Rh9C60Lgg0LDQutGC0LjQstC90YvRhSDQt9Cw0LrRg9C/0L7QulxuXG4oKCkgPT4ge1xuICAgIGxldCBjYXJkQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJkLWFjdGl2ZS1jdXN0b20tZGVza3RvcFwiKTtcblxuICAgIGNhcmRBY3RpdmUuZm9yRWFjaCgoYykgPT4ge1xuICAgICAgICBsZXQgYnRuVG9nZ2xlID0gYy5xdWVyeVNlbGVjdG9yKFwiLmNhcmQtYWN0aXZlLWN1c3RvbS1kZXNrdG9wX19idG4tYmxvY2tcIik7XG5cbiAgICAgICAgaWYgKGJ0blRvZ2dsZSkge1xuICAgICAgICAgICAgYnRuVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYy5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKClcblxuXG5cbi8v0JzQvtC00LDQu9C60LhcbmxldCBtb2RhbF9iZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2JnXCIpLFxuICAgIGJ0bl9jbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2J0bi1jbG9zZVwiKSxcbiAgICBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5cbmlmIChtb2RhbF9iZyAmJiBidG5fY2xvc2UgJiYgbW9kYWwpIHtcblxuICAgIGVsZW1fY2xvc2UobW9kYWxfYmcsIG1vZGFsKTtcbiAgICBlbGVtX2Nsb3NlKGJ0bl9jbG9zZSwgbW9kYWwpO1xufVxuXG5cblxuXG5cbi8v0KDQsNC30LLQvtGA0LDRh9C40LLQsNGO0YnQuNC50YHRjyDQsdC70L7QulxuKCgpPT4ge1xuICAgIGxldCB0b2dnbGVCbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sbGFwc2UtYmxvY2tcIik7XG5cbiAgICBpZiAodG9nZ2xlQmxvY2spIHsgICAgICAgIFxuXG4gICAgICAgIHRvZ2dsZUJsb2NrLmZvckVhY2goKHQpPT4ge1xuICAgICAgICAgICAgbGV0IGJ0bl90b2dnbGUgID0gdC5xdWVyeVNlbGVjdG9yKFwiLmFycm93XCIpO1xuXG4gICAgICAgICAgICBidG5fdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+IHtcbiAgICAgICAgICAgICAgICB0LmNsYXNzTGlzdC50b2dnbGUoXCJpcy10b2dnbGVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxufSkoKVxuXG5jb25zdCBzaWRlYmFyX2FycmF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaWRlYmFyXCIpO1xuXG5zaWRlYmFyX2FycmF5LmZvckVhY2goc2lkZWJhciA9PiB7XG4gICAgY29uc3Qgc2lkZWJhcl9iYWNrID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJfX2JhY2tncm91bmRcIik7XG4gICAgY29uc3Qgc2lkZWJhcl9jbG9zZSA9IHNpZGViYXIucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyX19jbG9zZVwiKTtcblxuICAgIHNpZGViYXJfYmFjay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZShcInNpZGViYXJfaXMtYWN0aXZlXCIpO1xuICAgIH0pO1xuXG4gICAgc2lkZWJhcl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZShcInNpZGViYXJfaXMtYWN0aXZlXCIpO1xuICAgIH0pO1xufSk7XG5cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9