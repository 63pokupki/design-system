!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}({0:function(e,t,n){"use strict";var r,o={},i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},c=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}();function l(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],l={css:i[1],media:i[2],sourceMap:i[3]};r[c]?r[c].parts.push(l):n.push(r[c]={id:c,parts:[l]})}return n}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id],c=0;if(i){for(i.refs++;c<i.parts.length;c++)i.parts[c](r.parts[c]);for(;c<r.parts.length;c++)i.parts.push(p(r.parts[c],t))}else{for(var l=[];c<r.parts.length;c++)l.push(p(r.parts[c],t));o[r.id]={id:r.id,refs:1,parts:l}}}}function s(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var r=n.nc;r&&(e.attributes.nonce=r)}if(Object.keys(e.attributes).forEach((function(n){t.setAttribute(n,e.attributes[n])})),"function"==typeof e.insert)e.insert(t);else{var o=c(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),c=e.childNodes;c[t]&&e.removeChild(c[t]),c.length?e.insertBefore(i,c[t]):e.appendChild(i)}}function v(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o&&e.setAttribute("media",o),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,y=0;function p(e,t){var n,r,o;if(t.singleton){var i=y++;n=m||(m=s(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=s(t),r=v.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=l(e,t);return a(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var c=n[i],s=o[c.id];s&&(s.refs--,r.push(s))}e&&a(l(e,t),t);for(var u=0;u<r.length;u++){var d=r[u];if(0===d.refs){for(var f=0;f<d.parts.length;f++)d.parts[f]();delete o[d.id]}}}}},20:function(e,t,n){n(21),e.exports=n(23)},21:function(e,t,n){var r=n(22);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(0)(r,o);r.locals&&(e.exports=r.locals)},22:function(e,t,n){},23:function(e,t){window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".disable-transition");e&&e.classList.toggle("disable-transition")}));var n=document.querySelectorAll(".stock-full");n&&n.forEach((function(e){var t=e.querySelector(".stock-full__wrapper");e.querySelector(".stock-full__expand").addEventListener("click",(function(){return t.classList.toggle("is-expanded")}))}));var r=document.querySelectorAll(".stock-dropdown-filter");r&&r.forEach((function(e){e.querySelector(".stock-dropdown-filter__head").addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var o=document.querySelectorAll(".item-params-list__item");o&&o.forEach((function(e){e.addEventListener("click",(function(){return e.classList.toggle("is-selected")}))}));var i=document.querySelectorAll(".item-params-list");o&&i.forEach((function(e){var t=e.nextElementSibling;t&&t.addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var c=document.querySelectorAll(".collapse-section");c&&c.forEach((function(e){e.querySelector(".collapse-section__heading").addEventListener("click",(function(){return e.classList.toggle("is-expanded")}))}));var l=document.querySelectorAll(".modal__select");if(l)for(var a=0;a<l.length;a++)l[a].addEventListener("click",(function(){this.classList.toggle("is-toggle")}));var s=document.querySelectorAll(".modal__select");s&&s.forEach((function(e){var t=e.querySelector(".modal__selected-position");e.querySelectorAll("li").forEach((function(e){e.addEventListener("click",(function(){t.innerHTML=e.innerHTML}))}))}));var u=document.querySelector(".modal__btn-about-goods"),d=document.querySelector(".modal__goods-info");u&&u.addEventListener("click",(function(){d.classList.toggle("is-toggle")})),document.querySelectorAll(".btn-sum").forEach((function(e){var t=e.querySelector(".btn-sum__plus"),n=e.querySelector(".btn-sum__minus"),r=e.querySelector(".btn-sum__sum-num");t&&n&&r&&(t.addEventListener("click",(function(){r.value++})),n.addEventListener("click",(function(){r.value--})))}));var f,v,m,y,p,g,h,_,b=document.querySelectorAll(".icon-heart-bold");b&&b.forEach((function(e){e.addEventListener("click",(function(){e.classList.toggle("icon-heart-filled")}))})),(f=document.querySelectorAll(".collapse-block"))&&f.forEach((function(e){var t=e.querySelector(".collapse-block__header");t&&t.addEventListener("click",(function(){e.classList.toggle("is-toggle")}))})),(v=document.querySelectorAll(".delivery__mobile"))&&v.forEach((function(e){var t=e.querySelector("#btn-toggle-wrap");t&&t.addEventListener("click",(function(){e.classList.toggle("is-toggle")}))})),(m=document.querySelectorAll(".delivery__city"))&&m.forEach((function(e){var t=e.querySelector(".delivery__city-header");t&&t.addEventListener("click",(function(){e.classList.toggle("is-toggle")}))})),document.querySelectorAll(".sidebar").forEach((function(e){var t=e.querySelector(".sidebar__background"),n=e.querySelector(".sidebar__close");t.addEventListener("click",(function(){e.classList.toggle("sidebar_is-active")})),n.addEventListener("click",(function(){e.classList.toggle("sidebar_is-active")}))})),(y=document.querySelectorAll(".card-active-custom"))&&y.forEach((function(e){var t=e.querySelectorAll(".arrow");t&&t.forEach((function(t){t.addEventListener("click",(function(){e.classList.toggle("is-toggle")}))}))})),(p=document.querySelectorAll(".modal"))&&p.forEach((function(e){var t=e.querySelector(".modal__bg"),n=e.querySelector(".modal__btn-close");t&&t.addEventListener("click",(function(){e.classList.remove("is-visible")})),n&&n.addEventListener("click",(function(){e.classList.remove("is-visible")}))})),(g=document.querySelectorAll(".switcher__label"))&&g.forEach((function(e){e.addEventListener("click",(function(){var e=document.querySelectorAll(".card-active-custom");e&&e.forEach((function(e){e.classList.toggle("is-toggle")}))}))})),(h=document.querySelectorAll(".auth-form"))&&h.forEach((function(e){var t=e.querySelector("#auth-tabs");t.addEventListener("click",(function(){!0===t.checked?(e.classList.toggle("auth-form_sign-up"),e.querySelector(".auth-form__form-sign-up").style.display="flex",e.querySelector(".auth-form__form-sign-in").style.display="none"):(e.classList.remove("auth-form_sign-up"),e.querySelector(".auth-form__form-sign-up").style.display="none",e.querySelector(".auth-form__form-sign-in").style.display="flex")}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.createElement("div");e.setAttribute("class","ds-home"),e.addEventListener("click",(function(){var e,t=window.location.host,n=window.location.origin;e=t.includes("github")?"".concat(n,"/design-system/"):"".concat(n);window.location.href=e})),document.body.appendChild(e)})),(_=document.querySelectorAll(".auth-form"))&&_.forEach((function(e){var t=e.querySelector(".auth-form__link-to-recovery-password"),n=e.querySelector(".auth-form__form-sign-in"),r=e.querySelector(".auth-form__form-password-recovery");t.addEventListener("click",(function(e){e.preventDefault(),n.style.display="none",r.style.display="block"}))}))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZXMvdXRpbHMvX2RzLXV0aWxzLnNjc3M/MWJiNCIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIm1lbW8iLCJzdHlsZXNJbkRvbSIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwiZSIsImxpc3RUb1N0eWxlcyIsImxpc3QiLCJvcHRpb25zIiwic3R5bGVzIiwibmV3U3R5bGVzIiwibGVuZ3RoIiwiaXRlbSIsImlkIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnRzIiwicHVzaCIsImFkZFN0eWxlc1RvRG9tIiwiZG9tU3R5bGUiLCJqIiwicmVmcyIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGUiLCJjcmVhdGVFbGVtZW50IiwiYXR0cmlidXRlcyIsIm5vbmNlIiwia2V5cyIsImZvckVhY2giLCJzZXRBdHRyaWJ1dGUiLCJpbnNlcnQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJpbmRleCIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiam9pbiIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJvYmoiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImluc2VydEJlZm9yZSIsImFwcGx5VG9UYWciLCJidG9hIiwiY29uY2F0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZmlyc3RDaGlsZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJ1cGRhdGUiLCJzdHlsZUluZGV4IiwicGFyZW50Tm9kZSIsInJlbW92ZVN0eWxlRWxlbWVudCIsIm5ld09iaiIsIm5ld0xpc3QiLCJtYXlSZW1vdmUiLCJfaSIsIl9kb21TdHlsZSIsImNvbnRlbnQiLCJsb2NhbHMiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzYWJsZV90cmFuc2l0aW9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwic3RvY2tfZnVsbCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzdG9jayIsInN0b2NrX2Z1bGxfd3JhcHBlciIsInN0b2NrX2Ryb3Bkb3duX2ZpbHRlciIsIml0ZW1fcGFyYW1zX2xpc3RfX2l0ZW1zIiwiaXRlbV9wYXJhbXNfbGlzdCIsImxpbmsiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJjb2xsYXBzZV9zZWN0aW9uIiwic2VjdGlvbiIsInNlbGVjdCIsImJ0IiwidGhpcyIsInNlbGVjdENvbnQiLCJzYyIsInNlbF9wb3NpdGlvbiIsImlubmVySFRNTCIsImJ0bl90b2dnbGUiLCJ0b2dnbGVfdHh0X2NvbnRhaW5lciIsInBsdXMiLCJtaW51cyIsImlucHV0IiwidG9nZ2xlQmxvY2siLCJkY3ciLCJkYyIsImNhcmRBY3RpdmUiLCJtb2RhbCIsInN3aXRjaGVyX19sYWJlbCIsImF1dGhfd3JhcCIsImFmIiwiaGVhcnRzIiwiaGVhcnQiLCJidG5fdG9nIiwiYnRuX3RvZ2dsZV9jaXR5Iiwic2lkZWJhciIsInNpZGViYXJfYmFjayIsInNpZGViYXJfY2xvc2UiLCJidG5Ub2dnbGUiLCJtb2RhbF9iZyIsImJ0bl9jbG9zZSIsInNsIiwiY2FyZCIsImF3IiwiYXV0aF90YWJzIiwiY2hlY2tlZCIsImRpc3BsYXkiLCJlbCIsInBhdGgiLCJob3N0IiwibG9jYXRpb24iLCJvcmlnaW4iLCJpbmNsdWRlcyIsImhyZWYiLCJib2R5IiwiYSIsImJ0bl9saW5rIiwiZm9ybV9zaWduVXAiLCJmb3JtX3JlY292ZXJ5IiwiYmwiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIs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R0FDUixJQUFJQyxFQUFnQkQsRUFBRXBJLGNBQWMseUNBQ2hDc0ksRUFBZ0JGLEVBQUVwSSxjQUFjLDRCQUNoQ3VJLEVBQWdCSCxFQUFFcEksY0FBYyxzQ0FFcENxSSxFQUFTNUQsaUJBQWlCLFNBQVEsU0FBQytELEdBQy9CQSxFQUFHQyxpQkFDSEgsRUFBWTVHLE1BQU1pRyxRQUFZLE9BQzlCWSxFQUFjN0csTUFBTWlHLFFBQVUiLCJmaWxlIjoianMvZHMtdXRpbHMuanM/YmYwMWEyMjg3ZDIwNzAzZjA1ZDciLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMjApO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlcyA9IFtdO1xuICB2YXIgbmV3U3R5bGVzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjc3MgPSBpdGVtWzFdO1xuICAgIHZhciBtZWRpYSA9IGl0ZW1bMl07XG4gICAgdmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG4gICAgdmFyIHBhcnQgPSB7XG4gICAgICBjc3M6IGNzcyxcbiAgICAgIG1lZGlhOiBtZWRpYSxcbiAgICAgIHNvdXJjZU1hcDogc291cmNlTWFwXG4gICAgfTtcblxuICAgIGlmICghbmV3U3R5bGVzW2lkXSkge1xuICAgICAgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBwYXJ0czogW3BhcnRdXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuICAgIHZhciBqID0gMDtcblxuICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgZG9tU3R5bGUucmVmcysrO1xuXG4gICAgICBmb3IgKDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgICBmb3IgKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgcGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG4gICAgICB9XG5cbiAgICAgIHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge1xuICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgcmVmczogMSxcbiAgICAgICAgcGFydHM6IHBhcnRzXG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9IG5vbmNlO1xuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMuYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9ucy5hdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH1cblxuICBpZiAoc291cmNlTWFwICYmIGJ0b2EpIHtcbiAgICBjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiLmNvbmNhdChidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpLCBcIiAqL1wiKTtcbiAgfSAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHN0eWxlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuICB9XG59XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyIHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlO1xuICB2YXIgdXBkYXRlO1xuICB2YXIgcmVtb3ZlO1xuXG4gIGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuICAgIHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuICAgIHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuICAgIHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUgPSBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblxuICAgIHJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgICAgIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG4gICAgfTtcbiAgfVxuXG4gIHVwZGF0ZShvYmopO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG4gICAgaWYgKG5ld09iaikge1xuICAgICAgaWYgKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZShvYmogPSBuZXdPYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxpc3QsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMuYXR0cmlidXRlcyA9IHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZXMgPT09ICdvYmplY3QnID8gb3B0aW9ucy5hdHRyaWJ1dGVzIDoge307IC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuICAvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cbiAgaWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09ICdib29sZWFuJykge1xuICAgIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuICB9XG5cbiAgdmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcbiAgYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgdmFyIG1heVJlbW92ZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gc3R5bGVzW2ldO1xuICAgICAgdmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cbiAgICAgIGlmIChkb21TdHlsZSkge1xuICAgICAgICBkb21TdHlsZS5yZWZzLS07XG4gICAgICAgIG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3TGlzdCkge1xuICAgICAgdmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcbiAgICAgIGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG1heVJlbW92ZS5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfZG9tU3R5bGUgPSBtYXlSZW1vdmVbX2ldO1xuXG4gICAgICBpZiAoX2RvbVN0eWxlLnJlZnMgPT09IDApIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBfZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBfZG9tU3R5bGUucGFydHNbal0oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlbGV0ZSBzdHlsZXNJbkRvbVtfZG9tU3R5bGUuaWRdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07IiwidmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanM/P3JlZi0tNS0xIS4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzPz9yZWYtLTUtMiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9yZWYtLTUtMyEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanM/P3JlZi0tNS00IS4vX2RzLXV0aWxzLnNjc3NcIik7XG5cbmlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xufVxuXG52YXIgb3B0aW9ucyA9IHt9XG5cbm9wdGlvbnMuaW5zZXJ0ID0gXCJoZWFkXCI7XG5vcHRpb25zLnNpbmdsZXRvbiA9IGZhbHNlO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmIChjb250ZW50LmxvY2Fscykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xufVxuIiwiLy8g0JLRgdC/0L7QvNC+0LPQsNGC0LXQu9GM0L3Ri9C1INGE0YPQvdC60YbQuNC4INC/0YDQvtC10LrRgtCwICjQtNC10LzQvtC90YHRgtGA0LDRhtC40Y8g0LjQvdGC0LXRgNCw0LrRgtC40LLQvdC+0YHRgtC4KVxuXG4vLyDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qu9C90L7QuSDQuNC90YTRiyDQviDQt9Cw0LrRg9C/0LrQtVxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICBjb25zdCBkaXNhYmxlX3RyYW5zaXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpc2FibGUtdHJhbnNpdGlvblwiKTtcbiAgICBpZiAoZGlzYWJsZV90cmFuc2l0aW9uKSB7XG4gICAgICAgIGRpc2FibGVfdHJhbnNpdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZGlzYWJsZS10cmFuc2l0aW9uXCIpO1xuICAgIH1cbn0pO1xuXG4vLyDQvtGC0LrRgNGL0YLQuNC1INC/0L7Qu9C90L7QuSDQuNC90YTRiyDQviDQt9Cw0LrRg9C/0LrQtVxuY29uc3Qgc3RvY2tfZnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RvY2stZnVsbFwiKTtcbmlmIChzdG9ja19mdWxsKSB7XG4gICAgc3RvY2tfZnVsbC5mb3JFYWNoKHN0b2NrID0+IHtcbiAgICAgICAgY29uc3Qgc3RvY2tfZnVsbF93cmFwcGVyID0gc3RvY2sucXVlcnlTZWxlY3RvcihcIi5zdG9jay1mdWxsX193cmFwcGVyXCIpO1xuICAgICAgICBjb25zdCBsaW5rX29wZW4gPSBzdG9jay5xdWVyeVNlbGVjdG9yKFwiLnN0b2NrLWZ1bGxfX2V4cGFuZFwiKTtcbiAgICAgICAgbGlua19vcGVuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBzdG9ja19mdWxsX3dyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZShcImlzLWV4cGFuZGVkXCIpKTtcbiAgICB9KTtcbn1cblxuY29uc3Qgc3RvY2tfZHJvcGRvd25fZmlsdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zdG9jay1kcm9wZG93bi1maWx0ZXJcIik7XG5pZiAoc3RvY2tfZHJvcGRvd25fZmlsdGVyKSB7XG4gICAgc3RvY2tfZHJvcGRvd25fZmlsdGVyLmZvckVhY2goZmlsdGVyID0+IHtcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IGZpbHRlci5xdWVyeVNlbGVjdG9yKFwiLnN0b2NrLWRyb3Bkb3duLWZpbHRlcl9faGVhZFwiKTtcbiAgICAgICAgaGVhZGluZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gZmlsdGVyLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1leHBhbmRlZFwiKSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IGl0ZW1fcGFyYW1zX2xpc3RfX2l0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pdGVtLXBhcmFtcy1saXN0X19pdGVtXCIpO1xuaWYgKGl0ZW1fcGFyYW1zX2xpc3RfX2l0ZW1zKSB7XG4gICAgaXRlbV9wYXJhbXNfbGlzdF9faXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaXRlbS5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtc2VsZWN0ZWRcIikpO1xuICAgIH0pO1xufVxuXG5jb25zdCBpdGVtX3BhcmFtc19saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pdGVtLXBhcmFtcy1saXN0XCIpO1xuaWYgKGl0ZW1fcGFyYW1zX2xpc3RfX2l0ZW1zKSB7XG4gICAgaXRlbV9wYXJhbXNfbGlzdC5mb3JFYWNoKGxpc3QgPT4ge1xuICAgICAgICBjb25zdCBsaW5rID0gbGlzdC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBsaXN0LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1leHBhbmRlZFwiKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuY29uc3QgY29sbGFwc2Vfc2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sbGFwc2Utc2VjdGlvblwiKTtcbmlmIChjb2xsYXBzZV9zZWN0aW9uKSB7XG4gICAgY29sbGFwc2Vfc2VjdGlvbi5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgICAgICBjb25zdCBoZWFkaW5nID0gc2VjdGlvbi5xdWVyeVNlbGVjdG9yKFwiLmNvbGxhcHNlLXNlY3Rpb25fX2hlYWRpbmdcIik7XG4gICAgICAgIGhlYWRpbmcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHNlY3Rpb24uY2xhc3NMaXN0LnRvZ2dsZShcImlzLWV4cGFuZGVkXCIpKTtcbiAgICB9KTtcbn1cblxuLy/QnNC+0LTQsNC70LrQuFxuXG4vLyA8IS0tINCc0L7QtNCw0LvQutCwINC60L7Qv9C40YDQvtCy0LDQvdC40LUg0L/QvtC30LjRhtC40LggLS0+XG5cbi8v0KDQsNGB0LrRgNGL0YLQuNC1INGB0L/QuNGB0LrQsFxubGV0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX3NlbGVjdFwiKTsgLy/QutC90L7Qv9C60LAg0YDQsNGB0LrRgNGL0LLQsNGO0YnQsNGPINCx0LvQvtC6XG4vL9Cf0LXRgNC10LHQuNGA0LDQtdC8INCy0YHQtSDQutC90L7Qv9C60LhcbmlmIChzZWxlY3QpIHtcbiAgICBmb3IgKGxldCBidCA9IDA7IGJ0IDwgc2VsZWN0Lmxlbmd0aDsgYnQrKykge1xuICAgICAgICBzZWxlY3RbYnRdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vL9CS0YvQsdC+0YAg0L/QvtC30LjRhtC40LhcblxubGV0IHNlbGVjdENvbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19zZWxlY3RcIik7XG5pZiAoc2VsZWN0Q29udCkge1xuICAgIHNlbGVjdENvbnQuZm9yRWFjaChzYyA9PiB7XG4gICAgICAgIGxldCBzZWxfcG9zaXRpb24gPSBzYy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zZWxlY3RlZC1wb3NpdGlvblwiKSxcbiAgICAgICAgICAgIGxpID0gc2MucXVlcnlTZWxlY3RvckFsbChcImxpXCIpO1xuXG4gICAgICAgIGxpLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgICBpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsX3Bvc2l0aW9uLmlubmVySFRNTCA9IGkuaW5uZXJIVE1MO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG4vLyA8IS0tINCa0LDRgNGC0L7Rh9C60LAg0YLQvtCy0LDRgNCwINGBINC60L7RgNC+0YLQutC40Lwg0LjQt9C+0LHRgNCw0LbQtdC90LjQtdC8IC0tPlxuXG5sZXQgYnRuX3RvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J0bi1hYm91dC1nb29kc1wiKSxcbiAgICB0b2dnbGVfdHh0X2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2dvb2RzLWluZm9cIik7XG5cbmlmIChidG5fdG9nZ2xlKSB7XG4gICAgYnRuX3RvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0b2dnbGVfdHh0X2NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgIH0pO1xufVxuXG4vLyA8IS0tINCa0L3QvtC/0LrQuCDRg9C/0YDQsNCy0LvQtdC90LjRjyDQutC+0LvQuNGH0LXRgdGC0LLQvtC8INGC0L7QstCw0YDQsCAtLT5cbmxldCBidG5fc3VtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idG4tc3VtXCIpO1xuXG5idG5fc3VtLmZvckVhY2gobSA9PiB7XG4gICAgbGV0IHBsdXMgPSBtLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXN1bV9fcGx1c1wiKSxcbiAgICAgICAgbWludXMgPSBtLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXN1bV9fbWludXNcIiksXG4gICAgICAgIGlucHV0ID0gbS5xdWVyeVNlbGVjdG9yKFwiLmJ0bi1zdW1fX3N1bS1udW1cIik7XG5cbiAgICBpZiAocGx1cyAmJiBtaW51cyAmJiBpbnB1dCkge1xuICAgICAgICBwbHVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSsrO1xuICAgICAgICB9KTtcbiAgICAgICAgbWludXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlLS07XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG4vLyA8IS0tINCh0LXRgNC00LXRh9C60L4gLS0+XG5cbmxldCBoZWFydHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmljb24taGVhcnQtYm9sZFwiKTtcblxuaWYgKGhlYXJ0cykge1xuICAgIGhlYXJ0cy5mb3JFYWNoKChoZWFydCkgPT4ge1xuICAgICAgICBoZWFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGhlYXJ0LmNsYXNzTGlzdC50b2dnbGUoXCJpY29uLWhlYXJ0LWZpbGxlZFwiKTtcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG4vL9Cg0LDQt9Cy0L7RgNCw0YfQuNCy0LDRjtGJ0LjQudGB0Y8g0LHQu9C+0LpcbigoKSA9PiB7XG4gICAgbGV0IHRvZ2dsZUJsb2NrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb2xsYXBzZS1ibG9ja1wiKTtcblxuICAgIGlmICh0b2dnbGVCbG9jaykge1xuICAgICAgICB0b2dnbGVCbG9jay5mb3JFYWNoKHQgPT4ge1xuICAgICAgICAgICAgLy8gbGV0IGJ0bl90b2dnbGUgPSB0LnF1ZXJ5U2VsZWN0b3IoXCIuYXJyb3dcIik7XG4gICAgICAgICAgICBsZXQgYnRuX3RvZ2dsZSA9IHQucXVlcnlTZWxlY3RvcihcIi5jb2xsYXBzZS1ibG9ja19faGVhZGVyXCIpO1xuXG4gICAgICAgICAgICBpZiAoYnRuX3RvZ2dsZSkge1xuICAgICAgICAgICAgICAgIGJ0bl90b2dnbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuXG4vL9Ch0LLQvtGA0LDRh9C40LLQsNC90LjQtSDQtNC+0YHRgtCw0LLQutC4INCyINC80L7QsdC40LvQutC1XG4oKCkgPT4ge1xuICAgIGxldCBkY3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRlbGl2ZXJ5X19tb2JpbGVcIik7XG5cbiAgICBpZiAoZGN3KSB7XG4gICAgICAgIGRjdy5mb3JFYWNoKGQgPT4ge1xuICAgICAgICAgICAgbGV0IGJ0bl90b2cgPSBkLnF1ZXJ5U2VsZWN0b3IoXCIjYnRuLXRvZ2dsZS13cmFwXCIpO1xuXG4gICAgICAgICAgICBpZiAoYnRuX3RvZykge1xuICAgICAgICAgICAgICAgIGJ0bl90b2cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtdG9nZ2xlXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuXG4vL9Ch0LLQvtGA0LDRh9C40LLQsNC90LjQtSDQutCw0YDRgtC+0YfQutC4INCz0L7RgNC+0LTQsCDQsiDQsdC70L7QutC1IC0g0LTQvtGB0YLQsNCy0LrQsCDQutGD0YDRjNC10YDQvtC8ICjQsiDQvNC+0LHQuNC70LrQtSkgKNC90LDQv9GA0LjQvNC10YAg0LrQsNGA0YLQvtGH0LrQsCBcItCh0LDQvNCw0YDQsFwiKVxuKCgpID0+IHtcbiAgICBsZXQgZGMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRlbGl2ZXJ5X19jaXR5XCIpO1xuXG4gICAgaWYgKGRjKSB7XG4gICAgICAgIGRjLmZvckVhY2goZCA9PiB7XG4gICAgICAgICAgICBsZXQgYnRuX3RvZ2dsZV9jaXR5ID0gZC5xdWVyeVNlbGVjdG9yKFwiLmRlbGl2ZXJ5X19jaXR5LWhlYWRlclwiKTtcblxuICAgICAgICAgICAgaWYgKGJ0bl90b2dnbGVfY2l0eSkge1xuICAgICAgICAgICAgICAgIGJ0bl90b2dnbGVfY2l0eS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkLmNsYXNzTGlzdC50b2dnbGUoXCJpcy10b2dnbGVcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG5cbmNvbnN0IHNpZGViYXJfYXJyYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpZGViYXJcIik7XG5cbnNpZGViYXJfYXJyYXkuZm9yRWFjaChzaWRlYmFyID0+IHtcbiAgICBjb25zdCBzaWRlYmFyX2JhY2sgPSBzaWRlYmFyLnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhcl9fYmFja2dyb3VuZFwiKTtcbiAgICBjb25zdCBzaWRlYmFyX2Nsb3NlID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJfX2Nsb3NlXCIpO1xuXG4gICAgc2lkZWJhcl9iYWNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKFwic2lkZWJhcl9pcy1hY3RpdmVcIik7XG4gICAgfSk7XG5cbiAgICBzaWRlYmFyX2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKFwic2lkZWJhcl9pcy1hY3RpdmVcIik7XG4gICAgfSk7XG59KTtcblxuLy/QmtCw0YDRgtC+0YfQutC4INCw0LrRgtC40LLQvdGL0YUg0LfQsNC60YPQv9C+0LpcblxuKCgpID0+IHtcbiAgICBsZXQgY2FyZEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FyZC1hY3RpdmUtY3VzdG9tXCIpO1xuXG4gICAgaWYgKGNhcmRBY3RpdmUpIHtcbiAgICAgICAgY2FyZEFjdGl2ZS5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgICAgbGV0IGJ0blRvZ2dsZSA9IGMucXVlcnlTZWxlY3RvckFsbChcIi5hcnJvd1wiKTtcblxuICAgICAgICAgICAgaWYgKGJ0blRvZ2dsZSkge1xuICAgICAgICAgICAgICAgIGJ0blRvZ2dsZS5mb3JFYWNoKGJ0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG5cbi8v0JfQsNC60YDRi9GC0LjQtSDQvNC+0LTQsNC70LrQuFxuKCgpID0+IHtcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuXG4gICAgaWYgKG1vZGFsKSB7XG4gICAgICAgIG1vZGFsLmZvckVhY2gobSA9PiB7XG4gICAgICAgICAgICBsZXQgbW9kYWxfYmcgPSBtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2JnXCIpLFxuICAgICAgICAgICAgICAgIGJ0bl9jbG9zZSA9IG0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnRuLWNsb3NlXCIpO1xuXG4gICAgICAgICAgICBpZiAobW9kYWxfYmcpIHtcbiAgICAgICAgICAgICAgICBtb2RhbF9iZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy12aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJ0bl9jbG9zZSkge1xuICAgICAgICAgICAgICAgIGJ0bl9jbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBtLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy12aXNpYmxlXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KSgpO1xuXG4vLyDQodCy0L7RgNCw0YfQuNCy0LDQvdC40LUv0YDQsNC30LLQvtGA0LDRh9C40LLQsNC90LjQtSDQstGB0LXRhSDQutCw0YDRgtC+0YfQtdC6INC90LAg0YHRgtGA0LDQvdC40YbQtVxuKCgpID0+IHtcbiAgICBsZXQgc3dpdGNoZXJfX2xhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zd2l0Y2hlcl9fbGFiZWxcIik7XG4gICAgaWYgKHN3aXRjaGVyX19sYWJlbCkgeyAgICAgICAgXG4gICAgICAgIHN3aXRjaGVyX19sYWJlbC5mb3JFYWNoKHNsID0+IHtcbiAgICAgICAgICAgIHNsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICBsZXQgY2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2FyZC1hY3RpdmUtY3VzdG9tXCIpO1xuICAgICAgICAgICAgICAgIGlmIChjYXJkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmQuZm9yRWFjaChjID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXRvZ2dsZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pKCk7XG5cblxuXG4vLyDQntC60L3QviDQsNCy0YLQvtGA0LjQt9Cw0YbQuNC4KNC/0LXRgNC10LrQu9GO0YfQtdC90LjQtSDQstC60LvQsNC00L7QuilcbigoKT0+IHtcbiAgICBsZXQgYXV0aF93cmFwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hdXRoLWZvcm1cIik7XG5cbiAgICBpZiAoYXV0aF93cmFwKSB7XG4gICAgICAgIGF1dGhfd3JhcC5mb3JFYWNoKChhdyk9PiB7XG4gICAgICAgICAgICBsZXQgYXV0aF90YWJzID0gYXcucXVlcnlTZWxlY3RvcihcIiNhdXRoLXRhYnNcIik7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgYXV0aF90YWJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKT0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXV0aF90YWJzLmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXcuY2xhc3NMaXN0LnRvZ2dsZShcImF1dGgtZm9ybV9zaWduLXVwXCIpO1xuICAgICAgICAgICAgICAgICAgICBhdy5xdWVyeVNlbGVjdG9yKFwiLmF1dGgtZm9ybV9fZm9ybS1zaWduLXVwXCIpLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgICAgICAgICAgICAgYXcucXVlcnlTZWxlY3RvcihcIi5hdXRoLWZvcm1fX2Zvcm0tc2lnbi1pblwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhdy5jbGFzc0xpc3QucmVtb3ZlKFwiYXV0aC1mb3JtX3NpZ24tdXBcIik7XG4gICAgICAgICAgICAgICAgICAgIGF3LnF1ZXJ5U2VsZWN0b3IoXCIuYXV0aC1mb3JtX19mb3JtLXNpZ24tdXBcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICBhdy5xdWVyeVNlbGVjdG9yKFwiLmF1dGgtZm9ybV9fZm9ybS1zaWduLWluXCIpLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTsgIFxuICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbn0pKCk7XG4gICAgXG5cbi8vINC60L3QvtC/0LrQsCDQvdCw0LfQsNC0XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGVsLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiZHMtaG9tZVwiKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ29faG9tZSk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG5cbiAgICBmdW5jdGlvbiBnb19ob21lKCkge1xuICAgICAgICBjb25zdCBob3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3Q7XG4gICAgICAgIGNvbnN0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgICAgIGxldCBwYXRoO1xuXG4gICAgICAgIGlmIChob3N0LmluY2x1ZGVzKFwiZ2l0aHViXCIpKSB7XG4gICAgICAgICAgICBwYXRoID0gYCR7b3JpZ2lufS9kZXNpZ24tc3lzdGVtL2A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXRoID0gYCR7b3JpZ2lufWA7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHBhdGg7XG4gICAgfVxufSk7XG5cbi8vINCX0LDQsdGL0LvQuCDQv9Cw0YDQvtC70Yw/XG4oKCk9PiB7XG4gICAgbGV0IGFmID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hdXRoLWZvcm1cIik7XG5cbiAgICBpZiAoYWYpIHtcbiAgICAgICAgYWYuZm9yRWFjaCgoYSk9PiB7XG4gICAgICAgICAgICBsZXQgYnRuX2xpbmsgICAgICA9IGEucXVlcnlTZWxlY3RvcihcIi5hdXRoLWZvcm1fX2xpbmstdG8tcmVjb3ZlcnktcGFzc3dvcmRcIiksXG4gICAgICAgICAgICAgICAgZm9ybV9zaWduVXAgICA9IGEucXVlcnlTZWxlY3RvcihcIi5hdXRoLWZvcm1fX2Zvcm0tc2lnbi1pblwiKSxcbiAgICAgICAgICAgICAgICBmb3JtX3JlY292ZXJ5ID0gYS5xdWVyeVNlbGVjdG9yKFwiLmF1dGgtZm9ybV9fZm9ybS1wYXNzd29yZC1yZWNvdmVyeVwiKTtcbiAgICBcbiAgICAgICAgICAgIGJ0bl9saW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLChibCk9PiB7XG4gICAgICAgICAgICAgICAgYmwucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBmb3JtX3NpZ25VcC5zdHlsZS5kaXNwbGF5ICAgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBmb3JtX3JlY292ZXJ5LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgfSk7XG4gICAgfVxufSkoKTtcblxuXG4iXSwic291cmNlUm9vdCI6IiJ9